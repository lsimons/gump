<?xml version="1.0" ?>
<!--
  Copyright 2001-2004 The Apache Software Foundation

  Licensed under the Apache License, Version 2.0 (the "License");
  you may not use this file except in compliance with the License.
  You may obtain a copy of the License at

       http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
-->
<module name="jakarta-jmeter-20" tag="rel-2_0">
<!-- Version $Revision: 1.6.2.2 $ Last updated $Date: 2004/07/01 15:49:48 $ -->
  <url href="http://jakarta.apache.org/jmeter/" />
  <description>
    Pure Java load testing and performance measurement tool.
    Release branch 2_0
  </description>

  <cvs repository="jakarta" module="jakarta-jmeter"/>
  

  <project name="jakarta-jmeter-20-cvs">
  	<!-- Build JMeter from CVS versions of dependencies -->
    <package>org.apache.jmeter</package>

    <ant target="gump-build">
      <property name="jmeter.version" value="2_0_@@DATE@@"/>
      <property name="gump.run" value="true"/>
      <!-- The version of this file -->
      <property name="version.projectfile" value="$Revision: 1.6.2.2 $"/>
      <property name="date.projectfile" value="$Date: 2004/07/01 15:49:48 $"/>

		<!-- Ensure work directories don't get dropped from classpath -->
		<mkdir dir="build/core"/>
		<mkdir dir="build/htmlparser"/>
		<mkdir dir="build/jorphan"/>
		
		<!-- Allow http to build: -->
		<mkdir dir="build/components"/>
	
		<!-- Allow Monitor to build -->
		<mkdir dir="build/protocol/http"/>
		<mkdir dir="build/monitor/model"/>
    </ant>

    <depend project="ant" />
    <depend project="jaf" />
    <depend project="javamail" />
    <depend project="jsse" />
    
    <option project="beanshell" ids="bsh-core"/>
    <option project="jakarta-bsf"/>

    <!-- Try to ensure that this builds after main jmeter build -->
    <option project="jakarta-jmeter-test">
    	<noclasspath/>
    </option>
    
    <work nested="build/core"/>
    <work nested="build/htmlparser"/>
    <work nested="build/jorphan"/>
    
    <!-- Allow http to build: -->
    <work nested="build/components"/>

    <!-- Allow Monitor to build -->
    <work nested="build/protocol/http"/>
    <work nested="build/monitor/model"/>
    
    <work nested="lib/excalibur-logger-1.1.jar"/>
    <work nested="lib/excalibur-compatibility-1.1.jar"/>
    <work nested="lib/excalibur-i18n-1.1.jar"/>
    
    <work nested="lib/avalon-framework-4.1.4.jar"/>
    <work nested="lib/commons-collections.jar"/>
    <work nested="lib/jakarta-oro-2.0.8.jar"/>
    <work nested="lib/jdom-b9.jar"/>
    <work nested="lib/junit.jar"/>
    <work nested="lib/js.jar"/>
    <work nested="lib/logkit-1.2.jar"/>
    <work nested="lib/soap.jar"/>
    <work nested="lib/Tidy.jar"/>

    <work nested="lib/commons-logging.jar"/>
    <work nested="lib/commons-httpclient-2.0.jar"/>


    <!-- needed for documentation -->
    <work nested="lib/velocity-1.4-dev.jar"/>
    
    <!-- are these still needed ? -->
    <work nested="lib/xalan.jar"/>
    <work nested="lib/xercesImpl.jar"/>
    <work nested="lib/xml-apis.jar"/>

    <!-- Export the JMeter jars -->
    <home nested="." />

    <jar name="dist/jakarta-jmeter-2_0_@@DATE@@_bin.zip" />
    <!-- jar name="dist/jakarta-jmeter-2_0_@@DATE@@_src.zip" /-->
    <!-- jar name="dist/jakarta-jmeter-2_0_@@DATE@@_lib.zip" /-->
    <license name="LICENSE"/>
    <jar name="NOTICE" />
    <jar name="INSTALLING" />

    <nag from="Gump-build &lt;sebb@apache.org&gt;"
         to="jmeter-dev@jakarta.apache.org">
        <regexp pattern="/BUILD FAILED/" subject="JMeter CVS Build Failure"/>
    </nag>
  </project>

  <project name="jakarta-jmeter-20-test">
    <package>org.apache.jmeter</package>
    <ant target="gump-test">
      <property name="jmeter.version" value="2_0_@@DATE@@"/>
      <property name="gump.run" value="true"/>
      <!-- The version of this file -->
      <property name="version.projectfile" value="$Revision: 1.6.2.2 $"/>
      <property name="date.projectfile" value="$Date: 2004/07/01 15:49:48 $"/>
    </ant>

    <depend project="ant" />

    <depend project="jakarta-jmeter-20-cvs" ids="none">
    	<noclasspath/>
    </depend>

<!-- Add jars that would otherwise come from jmeter-cvs -->
    <depend project="jaf" />
    <depend project="javamail" />
    <depend project="jsse" />

    <option project="beanshell" ids="bsh-core"/>
    <option project="jakarta-bsf"/>

    <work nested="lib/excalibur-logger-1.1.jar"/>
    <work nested="lib/excalibur-compatibility-1.1.jar"/>
    <work nested="lib/excalibur-i18n-1.1.jar"/>
    
    <work nested="lib/avalon-framework-4.1.4.jar"/>
    <work nested="lib/commons-collections.jar"/>
    <work nested="lib/jakarta-oro-2.0.8.jar"/>
    <work nested="lib/jdom-b9.jar"/>
    <work nested="lib/junit.jar"/>
    <work nested="lib/js.jar"/>
    <work nested="lib/logkit-1.2.jar"/>
    <work nested="lib/soap.jar"/>
    <work nested="lib/Tidy.jar"/>
    <work nested="lib/commons-httpclient-2.0.jar"/>
    <work nested="lib/commons-logging.jar"/>

    <!-- work nested="lib/velocity-1.4-dev.jar"/ -->
    <work nested="lib/xalan.jar"/>
    <work nested="lib/xercesImpl.jar"/>
    <work nested="lib/xml-apis.jar"/>

    <!-- Add jars needed to run tests -->
    <work nested="lib/jorphan.jar"/>
    <work nested="lib/htmlparser.jar"/>
    <work nested="lib/ext/ApacheJMeter_components.jar"/>
    <work nested="lib/ext/ApacheJMeter_core.jar"/>
    <work nested="lib/ext/ApacheJMeter_ftp.jar"/>
    <work nested="lib/ext/ApacheJMeter_functions.jar"/>
    <work nested="lib/ext/ApacheJMeter_http.jar"/>
    <work nested="lib/ext/ApacheJMeter_java.jar"/>
    <work nested="lib/ext/ApacheJMeter_jdbc.jar"/>
    <work nested="lib/ext/ApacheJMeter_ldap.jar"/>
    <work nested="lib/ext/ApacheJMeter_monitors.jar"/>
    <work nested="lib/ext/ApacheJMeter_tcp.jar"/>

    <nag from="Gump-build &lt;sebb@apache.org&gt;"
         to="jmeter-dev@jakarta.apache.org">
        <regexp pattern="/FAILURES!!!|OK \(0 tests\)/" subject="JMeter Unit Test Failure"/>
    </nag>
  </project>
  
</module>
