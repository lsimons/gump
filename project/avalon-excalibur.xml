<module name="avalon-excalibur">
    <!-- ===================================================================
          General notes
          
          Avalon-Excalibur is built using maven now. We use a very basic
          buildfile which delegates to a common buildfile which emulates
          most of the maven behaviour.
    -->

    <url href="http://avalon.apache.org/excalibur/"/>
    <description>
      Repository of reusable components.
    </description>
    <cvs repository="avalon"/>

    <project name="excalibur-compatibility">
        <!-- this project is the merge of several packages which previously
             existed seperately:

             excalibur-cli
             excalibur-collections
             excalibur-concurrent
             excalibur-io
        -->
        <package>org.apache.avalon.excalibur</package>

        <ant basedir="compatibility" target="jar">
            <property name="project.version" value="@@DATE@@"/>
        </ant>

        <!-- build-time dependencies -->
        <depend project="junit" inherit="runtime"/>
        <depend project="ant" inherit="runtime"/>

        <work nested="compatibility/target/classes"/>
        <work nested="compatibility/target/test-classes"/>

        <home nested="compatibility"/>
        <jar name="target/excalibur-compatibility-@@DATE@@.jar"/>

        <nag from="Gump Integration Build &lt;dev@avalon.apache.org&gt;"
                to="dev@avalon.apache.org"/>
    </project>

    <project name="excalibur-component">
        <!-- this project recently absorbed excalibur-testcase,
             which is still produced as a seperate jar -->
        <package>org.apache.avalon.excalibur.component</package>
        <package>org.apache.avalon.excalibur.testcase</package>

        <ant basedir="component" target="jar">
            <!-- runtime dependencies -->
            <depend property="avalon-framework.jar" project="avalon-framework" runtime="true" id="combined"/>
            <depend property="commons-collections.jar" project="commons-collections" runtime="true"/>
            <depend property="excalibur-instrument.jar" project="excalibur-instrument" runtime="true"/>
            <depend property="excalibur-instrument-manager.jar"
                    project="excalibur-instrument-manager"
                    runtime="true" id="main"/>
            <depend property="excalibur-instrument-manager-interfaces.jar"
                    project="excalibur-instrument-manager"
                    runtime="true"
                    id="interfaces"/>
            <depend property="excalibur-logger.jar" project="excalibur-logger" runtime="true"/>
            <depend property="excalibur-pool.jar" project="excalibur-pool" runtime="true"/>
            <depend property="logkit.jar" project="avalon-logkit" runtime="true"/>

            <!-- test-time dependencies -->
            <depend property="junit.jar" project="junit"/>
            <depend property="excalibur-i18n.jar" project="excalibur-i18n"/>

            <!-- optional dependencies -->
            <property name="checkstyle.jar" project="checkstyle" reference="jarpath"/>
            <property name="servlet.jar" project="jakarta-servletapi" reference="jarpath"/>

            <property name="project.version" value="@@DATE@@"/>
        </ant>

        <!-- build-time dependencies -->
        <depend project="ant" inherit="runtime"/>
        <depend project="xml-xalan2"/>
        <depend project="xml-xerces"/>

        <!-- optional dependencies -->
        <option project="checkstyle" inherit="runtime"/>
        <option project="jakarta-servletapi" inherit="runtime"/>

        <work nested="component/target/classes"/>
        <work nested="component/target/test-classes"/>

        <home nested="component"/>
        <jar name="target/excalibur-component-@@DATE@@.jar" id="component"/>
        <jar name="target/excalibur-testcase-@@DATE@@.jar" id="testcase"/>

        <nag from="Gump Integration Build &lt;dev@avalon.apache.org&gt;"
                to="dev@avalon.apache.org"/>
    </project>

    <project name="excalibur-configuration">
        <package>org.apache.excalibur.configuration</package>

    <ant basedir="configuration" target="dist">
            <property name="project.name" value="excalibur-configuration"/>
            <property name="package-version" value="@@DATE@@"/>
            <property name="junit.failonerror" value="true"/>
            <property name="do.checkstyle" value="false"/>
        <property name="skip.dependencies" value="true"/>

        <!-- runtime dependencies -->
            <depend property="avalon-framework.jar" project="avalon-framework" runtime="true" id="combined"/>
            <depend property="isorelax.jar" project="iso-relax" runtime="true"/>
            <depend property="jing.jar" project="jing" runtime="true"/>

            <!-- test-time dependencies -->
            <depend property="junit.jar" project="junit"/>

            <!-- optional dependencies -->
            <property name="checkstyle.jar" project="checkstyle" reference="jarpath"/>
            <property name="project.version" value="@@DATE@@"/>
        </ant>

        <!-- build-time dependencies -->
        <depend project="ant" inherit="runtime"/>
        <depend project="xml-xerces"/>
        <depend project="xml-xalan2"/>

        <!-- optional dependencies -->
        <option project="checkstyle" inherit="runtime"/>

        <work nested="configuration/target/classes"/>
        <work nested="configuration/target/test-classes"/>

        <home nested="configuration"/>

        <jar name="target/excalibur-configuration-@@DATE@@.jar"/>

        <nag>
          <regexp pattern="/Missing prereq/i"
            from="Gump Integration Build &lt;dev@avalon.apache.org&gt;"
            to="dev@avalon.apache.org"
            subject="PRE-REQ FAILED for excalibur-configuration"/>
        </nag>
        <nag from="Gump Integration Build &lt;dev@avalon.apache.org&gt;"
                to="dev@avalon.apache.org"/>
    </project>

    <project name="excalibur-datasource">
        <package>org.apache.avalon.excalibur.datasource</package>

        <ant basedir="datasource" target="jar">
            <depend property="excalibur-instrument.jar" project="excalibur-instrument" runtime="true"/>
            <depend property="excalibur-pool.jar" project="excalibur-pool" runtime="true"/>
            <depend property="excalibur-logger.jar" project="excalibur-logger"/>
            <depend property="excalibur-component.jar" project="excalibur-component" id="component"/>
            <depend property="excalibur-testcase.jar" project="excalibur-component" id="testcase"/>
            <!--<depend property="excalibur-fortress-tools.jar" project="avalon-fortress-tools" inherit="runtime"/>-->
            <depend property="logkit.jar" project="avalon-logkit"/>
            
            <!--<depend property="qdox.jar" project="phoenix-qdox"/>-->
            <property name="project.version" value="@@DATE@@"/>
        </ant>

        <depend project="ant" inherit="runtime"/>
        <option project="checkstyle" inherit="runtime"/>
        <depend project="junit"/>
        <depend project="avalon-fortress-tools" inherit="runtime"/>
        <depend project="avalon-framework" runtime="true" id="combined"/>
        <depend project="xml-xerces"/>
        <depend project="xml-xalan2"/>
        <work nested="datasource/target/classes"/>

        <home nested="datasource"/>
        <jar name="target/excalibur-datasource-@@DATE@@.jar"/>

        <nag from="Gump Integration Build &lt;dev@avalon.apache.org&gt;"
                to="dev@avalon.apache.org"/>
    </project>

    <project name="excalibur-event">
        <package>org.apache.excalibur.event</package>

        <ant basedir="event" target="jar">
            <!-- runtime dependencies -->
            <depend property="avalon-framework.jar" project="avalon-framework" runtime="true" id="combined"/>
            <depend property="commons-collections.jar" project="commons-collections" runtime="true"/>
            <depend property="util.concurrent.jar" project="concurrent" runtime="true"/>

            <!-- test-time dependencies -->
            <depend property="junit.jar" project="junit"/>
            <depend property="excalibur-pool.jar" project="excalibur-pool"/>
            <depend property="excalibur-instrument.jar" project="excalibur-instrument"/>
            <depend property="excalibur-component.jar" project="excalibur-component" id="component"/>
            <depend property="excalibur-testcase.jar" project="excalibur-component" id="testcase"/>
            <depend property="logkit.jar" project="avalon-logkit"/>

            <!-- optional dependencies -->
            <property name="checkstyle.jar" project="checkstyle" reference="jarpath"/>

            <property name="package-version" value="@@DATE@@"/>
            <property name="junit.failonerror" value="true"/>
            <property name="do.checkstyle" value="true"/>
            <property name="skip.dependencies" value="true"/>
            <property name="project.version" value="@@DATE@@"/>
        </ant>

        <!-- build-time dependencies -->
        <depend project="ant" inherit="runtime"/>
        <depend project="xml-xerces"/>
        <depend project="xml-xalan2"/>

        <!-- optional dependencies -->
        <option project="checkstyle" inherit="runtime"/>

        <work nested="event/target/classes"/>
        <work nested="event/target/test-classes"/>

        <home nested="event"/>
        <jar name="target/excalibur-event-@@DATE@@.jar"/>

        <nag from="Gump Integration Build &lt;dev@avalon.apache.org&gt;"
                to="dev@avalon.apache.org"/>
    </project>

    <!--project name="excalibur-extension">
        <package>org.apache.excalibur.extension</package>

        <ant basedir="extension" target="jar">
            <property name="checkstyle.jar" project="checkstyle" reference="jarpath"/>

            <depend property="junit.jar" project="junit"/>

            <property name="package-version" value="@@DATE@@"/>
            <property name="junit.failonerror" value="true"/>
            <property name="do.checkstyle" value="true"/>
            <property name="skip.dependencies" value="true"/>
            <property name="project.version" value="@@DATE@@"/>
        </ant>

        <depend project="ant" inherit="runtime"/>
        <depend project="xml-xerces"/>
        <depend project="xml-xalan2"/>

        <option project="checkstyle" inherit="runtime"/>

        <work nested="extension/target/classes"/>
        <work nested="extension/target/test-classes"/>

        <home nested="extension"/>
        <jar name="target/excalibur-extension-@@DATE@@.jar"/>

        <nag from="Gump Integration Build &lt;dev@avalon.apache.org&gt;"
                to="dev@avalon.apache.org"/>
    </project-->

    <project name="excalibur-i18n">
        <package>org.apache.avalon.excalibur.i18n</package>

        <ant basedir="i18n" target="dist">
            <property name="project.name" value="excalibur-i18n"/>
            <!-- optional dependencies -->
            <property name="checkstyle.jar" project="checkstyle" reference="jarpath"/>

            <!-- test-time dependencies -->

            <property name="package-version" value="@@DATE@@"/>
            <property name="junit.failonerror" value="true"/>
            <property name="do.checkstyle" value="true"/>
            <property name="skip.dependencies" value="true"/>
            <property name="project.version" value="@@DATE@@"/>
        </ant>

        <!-- build-time dependencies -->
        <depend project="ant" inherit="runtime"/>
        <depend project="xml-xerces"/>
        <depend project="xml-xalan2"/>
        <depend project="junit"/>

        <!-- optional dependencies -->
        <option project="checkstyle" inherit="runtime"/>

        <work nested="i18n/target/classes"/>
        <work nested="i18n/target/test-classes"/>

        <home nested="i18n"/>
        <jar name="target/excalibur-i18n-@@DATE@@.jar"/>

        <nag from="Gump Integration Build &lt;dev@avalon.apache.org&gt;"
                to="dev@avalon.apache.org"/>
    </project>

    <project name="excalibur-instrument">
        <package>org.apache.avalon.excalibur.instrument</package>

        <ant basedir="instrument" target="jar">
            <!-- optional dependencies -->
            <property name="avalon-framework.jar" project="avalon-framework" reference="jarpath" id="combined"/>
            <property name="checkstyle.jar" project="checkstyle" reference="jarpath"/>

            <!-- test-time dependencies -->
            <depend property="junit.jar" project="junit"/>

            <property name="project.version" value="@@DATE@@"/>
        </ant>

        <!-- build-time dependencies -->
        <depend project="ant" inherit="runtime"/>
        <depend project="xml-xerces"/>
        <depend project="xml-xalan2"/>

        <!-- optional dependencies -->
        <option project="avalon-framework" runtime="true" id="combined"/>
        <option project="checkstyle" inherit="runtime"/>

        <work nested="instrument/target/classes"/>
        <work nested="instrument/target/test-classes"/>

        <home nested="instrument"/>
        <jar name="target/excalibur-instrument-@@DATE@@.jar"/>

        <nag from="Gump Integration Build &lt;dev@avalon.apache.org&gt;"
                to="dev@avalon.apache.org"/>
    </project>

    <!-- no dependency on altrmi here. The ant buildfile knows to exclude the
         altrmi-related classes if altrmi is unavailable -->
    <project name="excalibur-instrument-manager">
        <package>org.apache.avalon.excalibur.instrument.manager</package>

        <mkdir dir="instrument-manager/target/classes"/>

        <ant basedir="instrument-manager" target="jar">
            <!-- runtime dependencies -->
            <depend property="avalon-framework.jar" project="avalon-framework" runtime="true" id="combined"/>
            <depend property="excalibur-instrument.jar" project="excalibur-instrument" runtime="true"/>

            <!-- optional dependencies -->
            <property name="checkstyle.jar" project="checkstyle" reference="jarpath"/>

            <!-- test-time dependencies -->
            <depend property="junit.jar" project="junit"/>

            <property name="project.version" value="@@DATE@@"/>

            <property name="src.exclude.pattern" value="**/package.html, **/altrmi/*"/>
        </ant>

        <!-- build-time dependencies -->
        <depend project="ant" inherit="runtime"/>
        <depend project="xml-xerces"/>
        <depend project="xml-xalan2"/>

        <!-- optional dependencies -->
        <option project="checkstyle" inherit="runtime"/>

        <work nested="instrument-manager/target/classes"/>
        <work nested="instrument-manager/target/test-classes"/>

        <home nested="instrument-manager"/>
        <jar name="target/excalibur-instrument-manager-@@DATE@@.jar"
             id="main"/>
        <jar name="target/excalibur-instrument-manager-interfaces-@@DATE@@.jar"
             id="interfaces"/>

        <nag from="Gump Integration Build &lt;dev@avalon.apache.org&gt;"
                to="dev@avalon.apache.org"/>
    </project>

    <!-- This is instrument-manager + altrmi. Should only be depended upon by
         projects which altrmi does not depend on. -->
    <project name="excalibur-instrument-manager-altrmi">
        <package>org.apache.avalon.excalibur.instrument.manager</package>

        <mkdir dir="instrument-manager/target/classes"/>

        <ant basedir="instrument-manager" target="jar">
            <!-- runtime dependencies -->
            <depend property="altrmi-common.jar" project="incubator-altrmi" id="common"/>
            <depend property="altrmi-client-interfaces.jar" project="incubator-altrmi" id="client-api"/>
            <depend property="altrmi-client-impl.jar" project="incubator-altrmi" id="client-impl"/>
            <depend property="altrmi-server-interfaces.jar" project="incubator-altrmi" id="server-api"/>
            <depend property="altrmi-server-impl.jar" project="incubator-altrmi" id="server-impl"/>

            <property name="project.version" value="@@DATE@@"/>
        </ant>

        <depend project="excalibur-instrument-manager" inherit="all" runtime="true"/>

        <work nested="instrument-manager/target/classes"/>
        <work nested="instrument-manager/target/test-classes"/>

        <home nested="instrument-manager"/>
        <jar name="target/excalibur-instrument-manager-@@DATE@@.jar"/>
        <jar name="target/excalibur-instrument-manager-interfaces-@@DATE@@.jar"/>

        <nag from="Gump Integration Build &lt;dev@avalon.apache.org&gt;"
                to="dev@avalon.apache.org"/>
    </project>

    <project name="excalibur-instrument-client">
        <package>org.apache.avalon.excalibur.instrument.client</package>

        <mkdir dir="instrument-client/target/classes"/>

        <ant basedir="instrument-client" target="jar">
            <!-- runtime dependencies -->
            <depend property="altrmi-common.jar" project="incubator-altrmi" id="common"/>
            <depend property="altrmi-client-interfaces.jar" project="incubator-altrmi" id="client-api"/>
            <depend property="altrmi-client-impl.jar" project="incubator-altrmi" id="client-impl"/>
            <depend property="altrmi-server-interfaces.jar" project="incubator-altrmi" id="server-api"/>
            <depend property="altrmi-server-impl.jar" project="incubator-altrmi" id="server-impl"/>
            <depend property="avalon-framework.jar" project="avalon-framework" runtime="true" id="combined"/>
            <depend property="excalibur-instrument-manager.jar"
                    project="excalibur-instrument-manager"
                    runtime="true" id="main"/>

            <!-- optional dependencies -->
            <property name="checkstyle.jar" project="checkstyle" reference="jarpath"/>

            <property name="project.version" value="@@DATE@@"/>
        </ant>

        <!-- build-time dependencies -->
        <depend project="ant" inherit="runtime"/>
        <depend project="xml-xerces"/>
        <depend project="xml-xalan2"/>

        <!-- optional dependencies -->
        <option project="avalon-framework" runtime="true" id="combined"/>
        <option project="checkstyle" inherit="runtime"/>

        <work nested="instrument-client/target/classes"/>

        <home nested="instrument-client"/>
        <jar name="target/excalibur-instrument-client-@@DATE@@.jar"/>

        <nag>
          <regexp pattern="/Missing prereq/i"
            from="Gump Integration Build &lt;dev@avalon.apache.org&gt;"
            to="dev@avalon.apache.org"
            subject="PRE-REQ FAILED for excalibur-instrument-client"/>
        </nag>
        <nag from="Gump Integration Build &lt;dev@avalon.apache.org&gt;"
                to="dev@avalon.apache.org"/>
    </project>

    <project name="excalibur-lifecycle">
        <package>org.apache.avalon.lifecycle</package>

        <ant basedir="lifecycle" target="jar">
            <!-- runtime dependencies -->
            <depend property="avalon-framework.jar" project="avalon-framework" runtime="true" id="combined"/>

            <!-- test-time dependencies -->
            <depend property="junit.jar" project="junit"/>

            <!-- optional dependencies -->
            <property name="checkstyle.jar" project="checkstyle" reference="jarpath"/>

            <property name="project.version" value="@@DATE@@"/>
        </ant>

        <!-- build-time dependencies -->
        <depend project="ant" inherit="runtime"/>
        <depend project="xml-xerces"/>
        <depend project="xml-xalan2"/>

        <!-- optional dependencies -->
        <option project="checkstyle" inherit="runtime"/>

        <work nested="lifecycle/target/classes"/>
        <work nested="lifecycle/target/test-classes"/>

        <home nested="lifecycle"/>
        <jar name="target/excalibur-lifecycle-@@DATE@@.jar"/>

        <nag from="Gump Integration Build &lt;dev@avalon.apache.org&gt;"
                to="dev@avalon.apache.org"/>
    </project>

    <project name="excalibur-logger">
        <package>org.apache.avalon.excalibur.logger</package>

        <ant basedir="logger" target="jar">
            <depend property="logkit.jar" project="avalon-logkit" runtime="true"/>
            <property name="package-version" value="@@DATE@@"/>
            <property name="junit.failonerror" value="true"/>
            <property name="do.checkstyle" value="true"/>
            <property name="skip.dependencies" value="true"/>
            <property name="project.version" value="@@DATE@@"/>
            <property name="do.not.test" value="true"/>
        </ant>

        <depend project="ant" inherit="runtime"/>
        <depend project="excalibur-i18n" inherit="runtime" runtime="true"/>
        <option project="checkstyle" inherit="runtime"/>
        <depend project="junit"/>
        <depend project="avalon-framework" runtime="true" id="combined"/>
        <depend project="jakarta-log4j" runtime="true"/>
        <depend project="xml-xerces"/>
        <depend project="xml-xalan2"/>

        <!-- test-time dependencies -->
        <!--

        circular dependency involving component & pool, so no tests
        run.

        <depend project="excalibur-component" id="testcase"/>
        <depend project="excalibur-component" id="component"/>
        <depend project="excalibur-pool"/>
        <depend project="excalibur-instrument"/>
        <depend project="commons-collections"/>-->

        <option project="jdbc" runtime="true"/>
        <option project="jms" runtime="true"/>
        <option project="javamail" runtime="true"/>
        <option project="jaf" runtime="true"/>
        <option project="jakarta-servletapi-4" runtime="true"/>

        <work nested="logger/target/classes"/>

        <home nested="logger"/>
        <jar name="target/excalibur-logger-@@DATE@@.jar"/>

        <nag from="Gump Integration Build &lt;dev@avalon.apache.org&gt;"
                to="dev@avalon.apache.org"/>
    </project>

    <project name="excalibur-logger-tests">
        <package>org.apache.avalon.excalibur.logger</package>

        <ant basedir="logger" target="jar">
            <property name="project.version" value="@@DATE@@-tested"/>
            <!--<property name="do.not.test" value="true"/>-->
        </ant>

        <depend project="excalibur-logger" inherit="all"/>

        <!-- test-time dependencies -->
        <depend project="excalibur-component" id="testcase"/>
        <depend project="excalibur-component" id="component"/>
        <depend project="excalibur-pool"/>
        <depend project="excalibur-instrument"/>
        <depend project="commons-collections"/>

        <work nested="logger/target/classes"/>
        <work nested="logger/target/test-classes"/>

        <home nested="logger"/>

        <nag from="Gump Integration Build &lt;dev@avalon.apache.org&gt;"
                to="dev@avalon.apache.org"/>
    </project>

    <project name="excalibur-monitor">
        <package>org.apache.excalibur.monitor</package>

        <ant basedir="monitor" target="jar">

            <depend property="qdox.jar" project="phoenix-qdox"/>
            <property name="project.version" value="@@DATE@@"/>
        </ant>

        <home nested="monitor"/>
        <work nested="monitor/target/classes"/>
        <work nested="monitor/target/test-classes"/>

        <jar name="target/excalibur-monitor-@@DATE@@.jar"/>

        <nag from="Gump Integration Build &lt;dev@avalon.apache.org&gt;"
                to="dev@avalon.apache.org"/>

        <depend project="ant" inherit="runtime"/>
        <depend project="avalon-framework" runtime="true" id="combined"/>
        <depend project="excalibur-pool" inherit="runtime"/>
        <depend project="excalibur-meta-sourceresolve" inherit="runtime"/>
        <depend project="xml-xerces"/>
        <depend project="xml-xalan2"/>

        <!-- build-time dependencies -->
        <depend project="avalon-fortress-tools" inherit="runtime"/>

        <!-- test-time dependencies -->
        <depend project="commons-collections" inherit="runtime"/>
        <depend project="excalibur-i18n" inherit="runtime"/>
        <depend project="excalibur-component" inherit="runtime"/> <!-- for testcase -->
        <depend project="excalibur-compatibility" inherit="runtime"/>
        <depend project="excalibur-instrument" inherit="runtime"/>
        <depend project="junit"/>
    </project>

    <project name="excalibur-pool">
        <package>org.apache.avalon.excalibur.pool</package>

        <ant basedir="pool" target="jar">
            <depend property="commons-collections" project="commons-collections"/>
            <depend property="excalibur-instrument.jar" project="excalibur-instrument"/>
            <depend property="logkit.jar" project="avalon-logkit" runtime="true"/>

            <property name="package-version" value="@@DATE@@"/>
            <property name="junit.failonerror" value="true"/>
            <property name="do.checkstyle" value="true"/>
            <property name="skip.dependencies" value="true"/>
            <property name="project.version" value="@@DATE@@"/>
            <property name="do.not.test" value="true"/>
        </ant>

        <depend project="ant" inherit="runtime"/>
        <option project="checkstyle" inherit="runtime"/>
        <depend project="concurrent"/>
        <depend project="avalon-framework" runtime="true" id="combined"/>
        <depend project="xml-xerces"/>
        <depend project="xml-xalan2"/>

        <depend project="junit"/>
        <depend project="junitperf"/>

        <work nested="pool/target/classes"/>

        <home nested="pool"/>
        <jar name="target/excalibur-pool-@@DATE@@.jar"/>

        <nag from="Gump Integration Build &lt;dev@avalon.apache.org&gt;"
                to="dev@avalon.apache.org"/>
        <nag>
          <regexp pattern="/Missing prereq/i"
            from="Gump Integration Build &lt;dev@avalon.apache.org&gt;"
            to="dev@avalon.apache.org"
            subject="PRE-REQ FAILED for excalibur-pool"/>
        </nag>
    </project>

    <project name="excalibur-pool-tests">
        <package>org.apache.avalon.excalibur.pool</package>

        <ant basedir="pool" target="jar">
            <property name="project.version" value="@@DATE@@-tested"/>
        </ant>

        <depend project="excalibur-pool" inherit="all"/>

        <work nested="pool/target/classes"/>
        <work nested="pool/target/test-classes"/>

        <home nested="pool"/>

        <nag from="Gump Integration Build &lt;dev@avalon.apache.org&gt;"
                to="dev@avalon.apache.org"/>
        <nag>
          <regexp pattern="/Missing prereq/i"
            from="Gump Integration Build &lt;dev@avalon.apache.org&gt;"
            to="dev@avalon.apache.org"
            subject="PRE-REQ FAILED for excalibur-pool"/>
        </nag>
    </project>

    <project name="excalibur-sourceresolve">
        <package>org.apache.excalibur.source</package>

        <ant basedir="sourceresolve" target="jar">
            <depend property="excalibur-pool.jar" project="excalibur-pool" runtime="true"/>
            <property name="package-version" value="@@DATE@@"/>
            <property name="junit.failonerror" value="true"/>
            <property name="do.checkstyle" value="true"/>
            <property name="skip.dependencies" value="true"/>
            <property name="project.version" value="@@DATE@@"/>
        </ant>

        <depend project="ant" inherit="runtime"/>
        <option project="checkstyle" inherit="runtime"/>
        <depend project="junit"/>
        <depend project="avalon-framework" runtime="true" id="combined"/>
        <depend project="xml-xerces"/>
        <depend project="xml-xalan2"/>
        <depend project="commons-httpclient"/>

        <work nested="sourceresolve/target/classes"/>
        <work nested="sourceresolve/target/test-classes"/>

        <home nested="sourceresolve"/>
        <jar name="target/excalibur-sourceresolve-@@DATE@@.jar"/>

        <nag from="Gump Integration Build &lt;dev@avalon.apache.org&gt;"
                to="dev@avalon.apache.org"/>
    </project>

    <project name="excalibur-meta-sourceresolve">
        <package>org.apache.excalibur.source</package>

        <ant basedir="sourceresolve" target="jar">
            <depend property="excalibur-fortress-tools.jar" project="avalon-fortress-tools" inherit="runtime"/>
            <depend property="qdox.jar" project="phoenix-qdox"/>
            <depend property="excalibur-pool.jar" project="excalibur-pool" runtime="true"/>
            <property name="package-version" value="@@DATE@@"/>
            <property name="junit.failonerror" value="true"/>
            <property name="do.checkstyle" value="true"/>
            <property name="skip.dependencies" value="true"/>
            <property name="project.version" value="@@DATE@@"/>
        </ant>

        <depend project="ant" inherit="runtime"/>
        <option project="checkstyle" inherit="runtime"/>
        <depend project="junit"/>
    <depend project="avalon-framework" runtime="true" id="combined"/>
        <depend project="avalon-fortress-container"/>
    <depend project="avalon-fortress-tools" runtime="true"/>
        <depend project="xml-xerces"/>
        <depend project="xml-xalan2"/>

        <work nested="sourceresolve/target/classes"/>
        <work nested="sourceresolve/target/test-classes"/>

        <home nested="sourceresolve"/>
        <jar name="target/excalibur-sourceresolve-@@DATE@@.jar"/>

        <nag from="Gump Integration Build &lt;dev@avalon.apache.org&gt;"
                to="dev@avalon.apache.org"/>
    </project>

    <project name="excalibur-store">
        <package>org.apache.excalibur.store</package>

        <ant basedir="store" target="jar">
            <depend property="excalibur-fortress-tools.jar" project="avalon-fortress-tools" inherit="runtime"/>
            <depend property="qdox.jar" project="phoenix-qdox"/>
            
            <property name="project.version" value="@@DATE@@"/>
        </ant>

        <depend project="ant" inherit="runtime"/>
        <option project="checkstyle" inherit="runtime"/>
        <depend project="junit"/>
    <depend project="avalon-framework" runtime="true" id="combined"/>
    <depend project="avalon-fortress-tools" runtime="true"/>
        <depend project="xml-xerces"/>
        <depend project="xml-xalan2"/>
        <depend project="jisp"/>
        <depend project="concurrent"/>

        <work nested="store/target/classes"/>
        <work nested="store/target/test-classes"/>

        <home nested="store"/>
        <jar name="target/excalibur-store-@@DATE@@.jar"/>

        <nag from="Gump Integration Build &lt;dev@avalon.apache.org&gt;"
                to="dev@avalon.apache.org"/>
    </project>

    <project name="excalibur-thread">
        <package>org.apache.avalon.excalibur.thread</package>

        <ant basedir="thread" target="jar">
            <depend project="commons-collections" runtime="true"/>
            <depend property="excalibur-pool.jar" project="excalibur-pool" runtime="true"/>
            <depend property="excalibur-instrument.jar" project="excalibur-instrument" runtime="true"/>
            <depend property="logkit.jar" project="avalon-logkit" runtime="true"/>

            <property name="package-version" value="@@DATE@@"/>
            <property name="junit.failonerror" value="true"/>
            <property name="do.checkstyle" value="true"/>
            <property name="skip.dependencies" value="true"/>
            <property name="project.version" value="@@DATE@@"/>
        </ant>

        <depend project="ant" inherit="runtime"/>
        <option project="checkstyle" inherit="runtime"/>
        <depend project="avalon-framework" runtime="true" id="combined"/>
        <depend project="xml-xerces"/>
        <depend project="xml-xalan2"/>

        <!-- test-time dependencies -->
        <depend project="junit"/>
        <depend project="junitperf"/>
        <depend project="excalibur-component" id="testcase"/>
        <depend project="concurrent"/>

        <work nested="thread/target/classes"/>
        <work nested="thread/target/test-classes"/>

        <home nested="thread"/>
        <jar name="target/excalibur-thread-@@DATE@@.jar"/>

        <nag from="Gump Integration Build &lt;dev@avalon.apache.org&gt;"
                to="dev@avalon.apache.org"/>
    </project>

    <project name="excalibur-xmlutil">
        <package>org.apache.avalon.excalibur.xml</package>

        <ant basedir="xmlutil" target="jar">
            <depend property="excalibur-logger.jar" project="excalibur-logger"/>
            <depend property="logkit.jar" project="avalon-logkit" runtime="true"/>
            <depend property="excalibur-instrument.jar" project="excalibur-instrument"/>
            <depend property="excalibur-component.jar" project="excalibur-component" id="component"/>
            <depend property="excalibur-pool.jar" project="excalibur-pool"/>
            <depend property="excalibur-sourceresolve.jar" project="excalibur-meta-sourceresolve"/>
            <depend property="excalibur-store.jar" project="excalibur-store"/>

            <!-- test-time dependencies -->
            <depend property="excalibur-testcase.jar" project="excalibur-component" id="testcase"/>
            <depend property="excalibur-i18n.jar" project="excalibur-i18n"/>
            <depend property="commons-collections.jar" project="commons-collections"/>
            <depend property="jaxen.jar" project="jaxen"/>
            <depend property="jtidy.jar" project="jtidy"/>
            <depend property="resolver.jar" project="xml-commons-resolver"/>
            <depend property="excalibur-fortress-tools.jar" project="avalon-fortress-tools" inherit="runtime"/>

            <depend property="qdox.jar" project="phoenix-qdox"/>

            <property name="project.version" value="@@DATE@@"/>
        </ant>

        <depend project="ant" inherit="runtime"/>
        <option project="checkstyle" inherit="runtime"/>
        <option project="jaxen" inherit="runtime"/>
        <depend project="junit"/>
        <depend project="avalon-framework" runtime="true" id="combined"/>
        <depend project="xml-xerces"/>
        <depend project="xml-xalan2"/>
        <work nested="xmlutil/target/classes"/>
        <work nested="xmlutil/target/test-classes"/>

        <home nested="xmlutil"/>
        <jar name="target/excalibur-xmlutil-@@DATE@@.jar"/>

        <nag from="Gump Integration Build &lt;dev@avalon.apache.org&gt;"
                to="dev@avalon.apache.org"/>
    </project>

    <!-- DUMMY, remove once Cocoon has removed its dependency -->
    <project name="excalibur-naming"/>

    <!-- ===================================================================
          Binary packages

    This is stuff not built from source by gump.
    =================================================================== -->

    <!-- this is temporarily in place so that we can get some clean gump
         runs set up without having to keep up with all the altrmi
         refactorings -->
    <project name="excalibur-altrmi-0.9.2">
        <package>org.apache.altrmi</package>

        <jar id="client-impl" name="lib/altrmi-client-impl-0.9.6.jar"/>
        <jar id="client-api" name="lib/altrmi-client-interfaces-0.9.6.jar"/>
        <jar id="common" name="lib/altrmi-common-0.9.6.jar"/>
        <jar id="generator" name="lib/altrmi-generator-0.9.6.jar"/>
        <jar id="server-impl" name="lib/altrmi-server-impl-0.9.6.jar"/>
        <jar id="server-api" name="lib/altrmi-server-interfaces-0.9.6.jar"/>

        <nag from="Gump Integration Build &lt;general@incubator.apache.org&gt;"
                to="dev@avalon.apache.org"/>
    </project>

</module>
