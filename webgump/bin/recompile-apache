#!/usr/bin/env bash

# Simple script to recompile and install httpd+mod_python (when already in the right place n stuff)

# look for this file
current=`pwd`
thisscript="`pwd`/start"
if [[ -f "$thisscript" ]]; then
  # guess...
  scriptdir="$current"
else
  # look for the path to this file
  homedir=`dirname $0`
  thisscript="$homedir/start"
  if [[ -f "$thisscript" ]]; then
    # guess...
    scriptdir="$homedir"
  fi
fi

# source settings
. $scriptdir/settings

# do it!
echo Recompiling apache...
echo
cd /home/lsimons/svn/gump/branches/Gump3/webgump/lib/apache2-install/httpd-2.0.53
make >/dev/null
make install >/dev/null

echo Recompiling mod_python...
echo
cd ../mod_python-3.1.4
make >/dev/null
make install_dso >/dev/null
make install_py_lib >/dev/null

echo done.
echo
